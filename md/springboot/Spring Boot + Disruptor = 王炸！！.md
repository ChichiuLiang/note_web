> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [mp.weixin.qq.com](https://mp.weixin.qq.com/s/UjXOchuhqvQ7MfhdY2CyGg)

> ğŸ‘‰ **è¿™æ˜¯ä¸€ä¸ªæˆ–è®¸å¯¹ä½ æœ‰ç”¨****çš„ç¤¾ç¾¤**
> 
> ğŸ± ä¸€å¯¹ä¸€äº¤æµ / é¢è¯•å°å†Œ / ç®€å†ä¼˜åŒ– / æ±‚èŒè§£æƒ‘ï¼Œæ¬¢è¿åŠ å…¥ã€Œ[**èŠ‹é“å¿«é€Ÿå¼€å‘å¹³å°**](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ã€çŸ¥è¯†æ˜Ÿçƒã€‚ä¸‹é¢æ˜¯æ˜Ÿçƒæä¾›çš„éƒ¨åˆ†èµ„æ–™ï¼šÂ 
> 
> *   [ã€Šé¡¹ç›®å®æˆ˜ï¼ˆè§†é¢‘ï¼‰ã€‹](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ï¼šä»ä¹¦ä¸­å­¦ï¼Œå¾€äº‹ä¸Š **â€œç»ƒâ€**
>     
> *   [ã€Šäº’è”ç½‘é«˜é¢‘é¢è¯•é¢˜ã€‹](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ï¼šé¢æœç®€å†å­¦ä¹ ï¼Œæ˜¥æš–èŠ±å¼€
>     
> *   [ã€Šæ¶æ„ x ç³»ç»Ÿè®¾è®¡ã€‹](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ï¼šæ‘§æ¯æ‹‰æœ½ï¼ŒæŒæ§é¢è¯•é«˜é¢‘åœºæ™¯é¢˜
>     
> *   [ã€Šç²¾è¿› Java å­¦ä¹ æŒ‡å—ã€‹](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ï¼šç³»ç»Ÿå­¦ä¹ ï¼Œäº’è”ç½‘ä¸»æµæŠ€æœ¯æ ˆ
>     
> *   [ã€Šå¿…è¯» Java æºç ä¸“æ ã€‹](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ï¼šçŸ¥å…¶ç„¶ï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶
>     

![](https://mmbiz.qpic.cn/mmbiz_gif/JdLkEI9sZfdWPYr0VKaXztEGHacpRyle7tbZkryrsxIpnAfjRt03ibrcloEZqlRPaVKcb0nD2PrYjtovwOAaFlA/640?wx_fmt=gif)

> ğŸ‘‰**è¿™æ˜¯ä¸€ä¸ªæˆ–è®¸å¯¹ä½ æœ‰ç”¨çš„å¼€æºé¡¹ç›®**
> 
> å›½äº§ Star ç ´ 10w+ çš„å¼€æºé¡¹ç›®ï¼Œå‰ç«¯åŒ…æ‹¬ç®¡ç†åå° + å¾®ä¿¡å°ç¨‹åºï¼Œåç«¯æ”¯æŒå•ä½“å’Œå¾®æœåŠ¡æ¶æ„ã€‚
> 
> åŠŸèƒ½æ¶µç›– RBAC æƒé™ã€SaaS å¤šç§Ÿæˆ·ã€æ•°æ®æƒé™ã€å•†åŸã€æ”¯ä»˜ã€å·¥ä½œæµã€å¤§å±æŠ¥è¡¨ã€å¾®ä¿¡å…¬ä¼—å·ã€CRM ç­‰ç­‰åŠŸèƒ½ï¼š
> 
> *   Boot ä»“åº“ï¼šhttps://gitee.com/zhijiantianya/ruoyi-vue-pro
>     
> *   Cloud ä»“åº“ï¼šhttps://gitee.com/zhijiantianya/yudao-cloud
>     
> *   è§†é¢‘æ•™ç¨‹ï¼šhttps://doc.iocoder.cn
>     
> 
> ã€å›½å†…é¦–æ‰¹ã€‘æ”¯æŒ JDK 21Â + SpringBoot 3.2.0ã€JDK 8 + Spring Boot 2.7.18 åŒç‰ˆæœ¬Â 

[æ¥æºï¼šblog.csdn.net/buertianci/](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

[article/details/105327031](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

*   [01ã€èƒŒæ™¯](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [02ã€Disruptor ä»‹ç»](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [03ã€Disruptor çš„æ ¸å¿ƒæ¦‚å¿µ](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [04ã€Ring Buffer](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [05ã€Sequence Disruptor](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [06ã€Sequencer](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [07ã€Sequence Barrier](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [08ã€Wait Strategy](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [09ã€Event](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [10ã€EventProcessor](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [11ã€EventHandler](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [12ã€Producer](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [13ã€æ¡ˆä¾‹ - demo](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [14ã€æ€»ç»“](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    

[![](https://mmbiz.qpic.cn/mmbiz_jpg/TNUwKhV0JpQUG0CKCjmzpSfdVibibuAmFS0DV6aduQzAa1TEibBfYylNJiaLNEibDMeiaG9QK2bUYsGDiaTicuMEjxNichQ/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)

* * *

[01ã€èƒŒæ™¯](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
--------------------------------------------------------------------------------------------------------------------------------------------

å·¥ä½œä¸­é‡åˆ°é¡¹ç›®ä½¿ç”¨ Disruptor åšæ¶ˆæ¯é˜Ÿåˆ—, å¯¹ä½ æ²¡çœ‹é”™, ä¸æ˜¯ Kafka, ä¹Ÿä¸æ˜¯ rabbitmq;Disruptor æœ‰ä¸ªæœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯å¿«, è¿˜æœ‰ä¸€ç‚¹å®ƒæ˜¯å¼€æºçš„å“¦, ä¸‹é¢åšä¸ªç®€å•çš„è®°å½•.

> åŸºäº Spring Boot + MyBatis Plus + Vue & Element å®ç°çš„åå°ç®¡ç†ç³»ç»Ÿ + ç”¨æˆ·å°ç¨‹åºï¼Œæ”¯æŒ RBAC åŠ¨æ€æƒé™ã€å¤šç§Ÿæˆ·ã€æ•°æ®æƒé™ã€å·¥ä½œæµã€ä¸‰æ–¹ç™»å½•ã€æ”¯ä»˜ã€çŸ­ä¿¡ã€å•†åŸç­‰åŠŸèƒ½
> 
> *   é¡¹ç›®åœ°å€ï¼šhttps://github.com/YunaiV/ruoyi-vue-pro
>     
> *   è§†é¢‘æ•™ç¨‹ï¼šhttps://doc.iocoder.cn/video/
>     

[02ã€Disruptor ä»‹ç»](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
------------------------------------------------------------------------------------------------------------------------------------------------------

1.  Disruptor æ˜¯è‹±å›½å¤–æ±‡äº¤æ˜“å…¬å¸ LMAX å¼€å‘çš„ä¸€ä¸ªé«˜æ€§èƒ½é˜Ÿåˆ—ï¼Œç ”å‘çš„åˆè¡·æ˜¯è§£å†³å†…å­˜é˜Ÿåˆ—çš„å»¶è¿Ÿé—®é¢˜ï¼ˆåœ¨æ€§èƒ½æµ‹è¯•ä¸­å‘ç°ç«Ÿç„¶ä¸ I/O æ“ä½œå¤„äºåŒæ ·çš„æ•°é‡çº§ï¼‰ã€‚åŸºäº Disruptor å¼€å‘çš„ç³»ç»Ÿå•çº¿ç¨‹èƒ½æ”¯æ’‘æ¯ç§’ 600 ä¸‡è®¢å•ï¼Œ2010 å¹´åœ¨ QCon æ¼”è®²åï¼Œè·å¾—äº†ä¸šç•Œå…³æ³¨ã€‚
    
2.  Disruptor æ˜¯ä¸€ä¸ªå¼€æºçš„ Java æ¡†æ¶ï¼Œå®ƒè¢«è®¾è®¡ç”¨äºåœ¨ç”Ÿäº§è€…â€”æ¶ˆè´¹è€…ï¼ˆproducer-consumer problemï¼Œç®€ç§° PCPï¼‰é—®é¢˜ä¸Šè·å¾—å°½é‡é«˜çš„ååé‡ï¼ˆTPSï¼‰å’Œå°½é‡ä½çš„å»¶è¿Ÿã€‚
    
3.  ä»åŠŸèƒ½ä¸Šæ¥çœ‹ï¼ŒDisruptor æ˜¯å®ç°äº† â€œé˜Ÿåˆ—â€ çš„åŠŸèƒ½ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªæœ‰ç•Œé˜Ÿåˆ—ã€‚é‚£ä¹ˆå®ƒçš„åº”ç”¨åœºæ™¯è‡ªç„¶å°±æ˜¯ â€œç”Ÿäº§è€… - æ¶ˆè´¹è€…â€ æ¨¡å‹çš„åº”ç”¨åœºåˆäº†ã€‚
    
4.  Disruptor æ˜¯ LMAX åœ¨çº¿äº¤æ˜“å¹³å°çš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼ŒLMAX å¹³å°ä½¿ç”¨è¯¥æ¡†æ¶å¯¹è®¢å•å¤„ç†é€Ÿåº¦èƒ½è¾¾åˆ° 600 ä¸‡ TPSï¼Œé™¤é‡‘èé¢†åŸŸä¹‹å¤–ï¼Œå…¶ä»–ä¸€èˆ¬çš„åº”ç”¨ä¸­éƒ½å¯ä»¥ç”¨åˆ° Disruptorï¼Œå®ƒå¯ä»¥å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚
    
5.  å…¶å® Disruptor ä¸å…¶è¯´æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œä¸å¦‚è¯´æ˜¯ä¸€ç§è®¾è®¡æ€è·¯ï¼Œè¿™ä¸ªè®¾è®¡æ€è·¯å¯¹äºå­˜åœ¨ â€œå¹¶å‘ã€ç¼“å†²åŒºã€ç”Ÿäº§è€…â€”æ¶ˆè´¹è€…æ¨¡å‹ã€äº‹åŠ¡å¤„ç†â€ è¿™äº›å…ƒç´ çš„ç¨‹åºæ¥è¯´ï¼ŒDisruptor æå‡ºäº†ä¸€ç§å¤§å¹…æå‡æ€§èƒ½ï¼ˆTPSï¼‰çš„æ–¹æ¡ˆã€‚
    
6.  Disruptor çš„ github ä¸»é¡µï¼šhttps://github.com/LMAX-Exchange/disruptor
    

> åŸºäº Spring Cloud Alibaba + Gateway + Nacos + RocketMQ + Vue & Element å®ç°çš„åå°ç®¡ç†ç³»ç»Ÿ + ç”¨æˆ·å°ç¨‹åºï¼Œæ”¯æŒ RBAC åŠ¨æ€æƒé™ã€å¤šç§Ÿæˆ·ã€æ•°æ®æƒé™ã€å·¥ä½œæµã€ä¸‰æ–¹ç™»å½•ã€æ”¯ä»˜ã€çŸ­ä¿¡ã€å•†åŸç­‰åŠŸèƒ½
> 
> *   é¡¹ç›®åœ°å€ï¼šhttps://github.com/YunaiV/yudao-cloud
>     
> *   è§†é¢‘æ•™ç¨‹ï¼šhttps://doc.iocoder.cn/video/
>     

[03ã€Disruptor çš„æ ¸å¿ƒæ¦‚å¿µ](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
---------------------------------------------------------------------------------------------------------------------------------------------------------

å…ˆä»äº†è§£ Disruptor çš„æ ¸å¿ƒæ¦‚å¿µå¼€å§‹ï¼Œæ¥äº†è§£å®ƒæ˜¯å¦‚ä½•è¿ä½œçš„ã€‚ä¸‹é¢ä»‹ç»çš„æ¦‚å¿µæ¨¡å‹ï¼Œæ—¢æ˜¯é¢†åŸŸå¯¹è±¡ï¼Œä¹Ÿæ˜¯æ˜ å°„åˆ°ä»£ç å®ç°ä¸Šçš„æ ¸å¿ƒå¯¹è±¡ã€‚

[04ã€Ring Buffer](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
-----------------------------------------------------------------------------------------------------------------------------------------------------

å¦‚å…¶åï¼Œç¯å½¢çš„ç¼“å†²åŒºã€‚æ›¾ç» RingBuffer æ˜¯ Disruptor ä¸­çš„æœ€ä¸»è¦çš„å¯¹è±¡ï¼Œä½†ä» 3.0 ç‰ˆæœ¬å¼€å§‹ï¼Œå…¶èŒè´£è¢«ç®€åŒ–ä¸ºä»…ä»…è´Ÿè´£å¯¹é€šè¿‡ Disruptor è¿›è¡Œäº¤æ¢çš„æ•°æ®ï¼ˆäº‹ä»¶ï¼‰è¿›è¡Œå­˜å‚¨å’Œæ›´æ–°ã€‚åœ¨ä¸€äº›æ›´é«˜çº§çš„åº”ç”¨åœºæ™¯ä¸­ï¼ŒRing Buffer å¯ä»¥ç”±ç”¨æˆ·çš„è‡ªå®šä¹‰å®ç°æ¥å®Œå…¨æ›¿ä»£ã€‚

[05ã€Sequence Disruptor](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
------------------------------------------------------------------------------------------------------------------------------------------------------------

é€šè¿‡é¡ºåºé€’å¢çš„åºå·æ¥ç¼–å·ç®¡ç†é€šè¿‡å…¶è¿›è¡Œäº¤æ¢çš„æ•°æ®ï¼ˆäº‹ä»¶ï¼‰ï¼Œå¯¹æ•°æ® (äº‹ä»¶) çš„å¤„ç†è¿‡ç¨‹æ€»æ˜¯æ²¿ç€åºå·é€ä¸ªé€’å¢å¤„ç†ã€‚ä¸€ä¸ª Sequence ç”¨äºè·Ÿè¸ªæ ‡è¯†æŸä¸ªç‰¹å®šçš„äº‹ä»¶å¤„ç†è€… ( RingBuffer/Consumer ) çš„å¤„ç†è¿›åº¦ã€‚è™½ç„¶ä¸€ä¸ª AtomicLong ä¹Ÿå¯ä»¥ç”¨äºæ ‡è¯†è¿›åº¦ï¼Œä½†å®šä¹‰ Sequence æ¥è´Ÿè´£è¯¥é—®é¢˜è¿˜æœ‰å¦ä¸€ä¸ªç›®çš„ï¼Œé‚£å°±æ˜¯é˜²æ­¢ä¸åŒçš„ Sequence ä¹‹é—´çš„ CPU ç¼“å­˜ä¼ªå…±äº« (Flase Sharing) é—®é¢˜ã€‚ï¼ˆæ³¨ï¼šè¿™æ˜¯ Disruptor å®ç°é«˜æ€§èƒ½çš„å…³é”®ç‚¹ä¹‹ä¸€ï¼Œç½‘ä¸Šå…³äºä¼ªå…±äº«é—®é¢˜çš„ä»‹ç»å·²ç»æ±—ç‰›å……æ ‹ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ï¼‰ã€‚

[06ã€Sequencer](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
---------------------------------------------------------------------------------------------------------------------------------------------------

Sequencer æ˜¯ Disruptor çš„çœŸæ­£æ ¸å¿ƒã€‚æ­¤æ¥å£æœ‰ä¸¤ä¸ªå®ç°ç±» SingleProducerSequencerã€MultiProducerSequencer ï¼Œå®ƒä»¬å®šä¹‰åœ¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´å¿«é€Ÿã€æ­£ç¡®åœ°ä¼ é€’æ•°æ®çš„å¹¶å‘ç®—æ³•ã€‚

[07ã€Sequence Barrier](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
----------------------------------------------------------------------------------------------------------------------------------------------------------

ç”¨äºä¿æŒå¯¹ RingBuffer çš„ main published Sequence å’Œ Consumer ä¾èµ–çš„å…¶å®ƒ Consumer çš„ Sequence çš„å¼•ç”¨ã€‚Sequence Barrier è¿˜å®šä¹‰äº†å†³å®š Consumer æ˜¯å¦è¿˜æœ‰å¯å¤„ç†çš„äº‹ä»¶çš„é€»è¾‘ã€‚

[08ã€Wait Strategy](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
-------------------------------------------------------------------------------------------------------------------------------------------------------

å®šä¹‰ Consumer å¦‚ä½•è¿›è¡Œç­‰å¾…ä¸‹ä¸€ä¸ªäº‹ä»¶çš„ç­–ç•¥ã€‚ï¼ˆæ³¨ï¼šDisruptor å®šä¹‰äº†å¤šç§ä¸åŒçš„ç­–ç•¥ï¼Œé’ˆå¯¹ä¸åŒçš„åœºæ™¯ï¼Œæä¾›äº†ä¸ä¸€æ ·çš„æ€§èƒ½è¡¨ç°ï¼‰

[09ã€Event](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
-----------------------------------------------------------------------------------------------------------------------------------------------

åœ¨ Disruptor çš„è¯­ä¹‰ä¸­ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´è¿›è¡Œäº¤æ¢çš„æ•°æ®è¢«ç§°ä¸ºäº‹ä»¶ (Event)ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªè¢« Disruptor å®šä¹‰çš„ç‰¹å®šç±»å‹ï¼Œè€Œæ˜¯ç”± Disruptor çš„ä½¿ç”¨è€…å®šä¹‰å¹¶æŒ‡å®šã€‚

[10ã€EventProcessor](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
--------------------------------------------------------------------------------------------------------------------------------------------------------

EventProcessor æŒæœ‰ç‰¹å®šæ¶ˆè´¹è€… (Consumer) çš„ Sequenceï¼Œå¹¶æä¾›ç”¨äºè°ƒç”¨äº‹ä»¶å¤„ç†å®ç°çš„äº‹ä»¶å¾ªç¯(Event Loop)ã€‚

[11ã€EventHandler](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
------------------------------------------------------------------------------------------------------------------------------------------------------

Disruptor å®šä¹‰çš„äº‹ä»¶å¤„ç†æ¥å£ï¼Œç”±ç”¨æˆ·å®ç°ï¼Œç”¨äºå¤„ç†äº‹ä»¶ï¼Œæ˜¯ Consumer çš„çœŸæ­£å®ç°ã€‚

[12ã€Producer](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
--------------------------------------------------------------------------------------------------------------------------------------------------

å³ç”Ÿäº§è€…ï¼Œåªæ˜¯æ³›æŒ‡è°ƒç”¨ Disruptor å‘å¸ƒäº‹ä»¶çš„ç”¨æˆ·ä»£ç ï¼ŒDisruptor æ²¡æœ‰å®šä¹‰ç‰¹å®šæ¥å£æˆ–ç±»å‹ã€‚

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfeoByeogGJV00GcoZuI1xxPzqqeYBc32SkRiad3lgZJcfF8icUoiaZEQJSztHXsRLA2HmQLkyyldBmKg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

[13ã€æ¡ˆä¾‹ - demo](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
---------------------------------------------------------------------------------------------------------------------------------------------------

*   é€šè¿‡ä¸‹é¢ 8 ä¸ªæ­¥éª¤, ä½ å°±èƒ½å°† Disruptor Get å›å®¶å•¦ï¼š
    
*   1ã€æ·»åŠ  pom.xml ä¾èµ–
    

```
<dependency>Â Â Â Â <groupId>com.lmax</groupId>Â Â Â Â <artifactId>disruptor</artifactId>Â Â Â Â <version>3.3.4</version></dependency>
```

*   2ã€æ¶ˆæ¯ä½“ Model
    

```
/**Â *Â æ¶ˆæ¯ä½“Â */@DatapublicÂ classÂ MessageModelÂ {Â Â Â Â privateÂ StringÂ message;}
```

*   3ã€æ„é€  EventFactory
    

```
publicÂ classÂ HelloEventFactoryÂ implementsÂ EventFactory<MessageModel>Â {Â Â Â Â @OverrideÂ Â Â Â publicÂ MessageModelÂ newInstance()Â {Â Â Â Â Â Â Â Â returnÂ newÂ MessageModel();Â Â Â Â }}
```

*   4ã€æ„é€  EventHandler - æ¶ˆè´¹è€…
    

```
@Slf4jpublicÂ classÂ HelloEventHandlerÂ implementsÂ EventHandler<MessageModel>Â {Â Â Â Â @OverrideÂ Â Â Â publicÂ voidÂ onEvent(MessageModelÂ event,Â longÂ sequence,Â booleanÂ endOfBatch)Â {Â Â Â Â Â Â Â Â tryÂ {Â Â Â Â Â Â Â Â Â Â Â Â //è¿™é‡Œåœæ­¢1000msæ˜¯ä¸ºäº†ç¡®å®šæ¶ˆè´¹æ¶ˆæ¯æ˜¯å¼‚æ­¥çš„Â Â Â Â Â Â Â Â Â Â Â Â Thread.sleep(1000);Â Â Â Â Â Â Â Â Â Â Â Â log.info("æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯å¼€å§‹");Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (eventÂ !=Â null)Â {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log.info("æ¶ˆè´¹è€…æ¶ˆè´¹çš„ä¿¡æ¯æ˜¯ï¼š{}",event);Â Â Â Â Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â }Â catchÂ (ExceptionÂ e)Â {Â Â Â Â Â Â Â Â Â Â Â Â log.info("æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯å¤±è´¥");Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â log.info("æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯ç»“æŸ");Â Â Â Â }}
```

*   5ã€æ„é€  BeanManager
    

```
/**Â *Â è·å–å®ä¾‹åŒ–å¯¹è±¡Â */@ComponentpublicÂ classÂ BeanManagerÂ implementsÂ ApplicationContextAwareÂ {Â Â Â Â privateÂ staticÂ ApplicationContextÂ applicationContextÂ =Â null;Â Â Â Â @OverrideÂ Â Â Â publicÂ voidÂ setApplicationContext(ApplicationContextÂ applicationContext)Â throwsÂ BeansExceptionÂ {Â Â Â Â Â Â Â Â this.applicationContextÂ =Â applicationContext;Â Â Â Â }Â Â Â Â publicÂ staticÂ ApplicationContextÂ getApplicationContext()Â {Â returnÂ applicationContext;Â }Â Â Â Â publicÂ staticÂ ObjectÂ getBean(StringÂ name)Â {Â Â Â Â Â Â Â Â returnÂ applicationContext.getBean(name);Â Â Â Â }Â Â Â Â publicÂ staticÂ <T>Â TÂ getBean(Class<T>Â clazz)Â {Â Â Â Â Â Â Â Â returnÂ applicationContext.getBean(clazz);Â Â Â Â }}
```

*   6ã€æ„é€  MQManager
    

```
@ConfigurationpublicÂ classÂ MQManagerÂ {Â Â Â Â @Bean("messageModel")Â Â Â Â publicÂ RingBuffer<MessageModel>Â messageModelRingBuffer()Â {Â Â Â Â Â Â Â Â //å®šä¹‰ç”¨äºäº‹ä»¶å¤„ç†çš„çº¿ç¨‹æ± ï¼ŒÂ Disruptoré€šè¿‡java.util.concurrent.ExecutorSerivceæä¾›çš„çº¿ç¨‹æ¥è§¦å‘consumerçš„äº‹ä»¶å¤„ç†Â Â Â Â Â Â Â Â ExecutorServiceÂ executorÂ =Â Executors.newFixedThreadPool(2);Â Â Â Â Â Â Â Â //æŒ‡å®šäº‹ä»¶å·¥å‚Â Â Â Â Â Â Â Â HelloEventFactoryÂ factoryÂ =Â newÂ HelloEventFactory();Â Â Â Â Â Â Â Â //æŒ‡å®šringbufferå­—èŠ‚å¤§å°ï¼Œå¿…é¡»ä¸º2çš„Næ¬¡æ–¹ï¼ˆèƒ½å°†æ±‚æ¨¡è¿ç®—è½¬ä¸ºä½è¿ç®—æé«˜æ•ˆç‡ï¼‰ï¼Œå¦åˆ™å°†å½±å“æ•ˆç‡Â Â Â Â Â Â Â Â intÂ bufferSizeÂ =Â 1024Â *Â 256;Â Â Â Â Â Â Â Â //å•çº¿ç¨‹æ¨¡å¼ï¼Œè·å–é¢å¤–çš„æ€§èƒ½Â Â Â Â Â Â Â Â Disruptor<MessageModel>Â disruptorÂ =Â newÂ Disruptor<>(factory,Â bufferSize,Â executor,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ProducerType.SINGLE,Â newÂ BlockingWaitStrategy());Â Â Â Â Â Â Â Â //è®¾ç½®äº‹ä»¶ä¸šåŠ¡å¤„ç†å™¨---æ¶ˆè´¹è€…Â Â Â Â Â Â Â Â disruptor.handleEventsWith(newÂ HelloEventHandler());Â Â Â Â Â Â Â Â //Â å¯åŠ¨disruptorçº¿ç¨‹Â Â Â Â Â Â Â Â disruptor.start();Â Â Â Â Â Â Â Â //è·å–ringbufferç¯ï¼Œç”¨äºæ¥å–ç”Ÿäº§è€…ç”Ÿäº§çš„äº‹ä»¶Â Â Â Â Â Â Â Â RingBuffer<MessageModel>Â ringBufferÂ =Â disruptor.getRingBuffer();Â Â Â Â Â Â Â Â returnÂ ringBuffer;Â Â Â Â }
```

*   7ã€æ„é€  Mqservice å’Œå®ç°ç±» - ç”Ÿäº§è€…
    

```
publicÂ interfaceÂ DisruptorMqServiceÂ {Â Â Â Â /**Â Â Â Â Â *Â æ¶ˆæ¯Â Â Â Â Â *Â @paramÂ messageÂ Â Â Â Â */Â Â Â Â voidÂ sayHelloMq(StringÂ message);}@Slf4j@Component@ServicepublicÂ classÂ DisruptorMqServiceImplÂ implementsÂ DisruptorMqServiceÂ {Â Â Â Â @AutowiredÂ Â Â Â privateÂ RingBuffer<MessageModel>Â messageModelRingBuffer;Â Â Â Â @OverrideÂ Â Â Â publicÂ voidÂ sayHelloMq(StringÂ message)Â {Â Â Â Â Â Â Â Â log.info("recordÂ theÂ message:Â {}",message);Â Â Â Â Â Â Â Â //è·å–ä¸‹ä¸€ä¸ªEventæ§½çš„ä¸‹æ ‡Â Â Â Â Â Â Â Â longÂ sequenceÂ =Â messageModelRingBuffer.next();Â Â Â Â Â Â Â Â tryÂ {Â Â Â Â Â Â Â Â Â Â Â Â //ç»™Eventå¡«å……æ•°æ®Â Â Â Â Â Â Â Â Â Â Â Â MessageModelÂ eventÂ =Â messageModelRingBuffer.get(sequence);Â Â Â Â Â Â Â Â Â Â Â Â event.setMessage(message);Â Â Â Â Â Â Â Â Â Â Â Â log.info("å¾€æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ·»åŠ æ¶ˆæ¯ï¼š{}",Â event);Â Â Â Â Â Â Â Â }Â catchÂ (ExceptionÂ e)Â {Â Â Â Â Â Â Â Â Â Â Â Â log.error("failedÂ toÂ addÂ eventÂ toÂ messageModelRingBufferÂ forÂ :Â eÂ =Â {},{}",e,e.getMessage());Â Â Â Â Â Â Â Â }Â finallyÂ {Â Â Â Â Â Â Â Â Â Â Â Â //å‘å¸ƒEventï¼Œæ¿€æ´»è§‚å¯Ÿè€…å»æ¶ˆè´¹ï¼Œå°†sequenceä¼ é€’ç»™æ”¹æ¶ˆè´¹è€…Â Â Â Â Â Â Â Â Â Â Â Â //æ³¨æ„æœ€åçš„publishæ–¹æ³•å¿…é¡»æ”¾åœ¨finallyä¸­ä»¥ç¡®ä¿å¿…é¡»å¾—åˆ°è°ƒç”¨ï¼›å¦‚æœæŸä¸ªè¯·æ±‚çš„sequenceæœªè¢«æäº¤å°†ä¼šå µå¡åç»­çš„å‘å¸ƒæ“ä½œæˆ–è€…å…¶ä»–çš„producerÂ Â Â Â Â Â Â Â Â Â Â Â messageModelRingBuffer.publish(sequence);Â Â Â Â Â Â Â Â }Â Â Â Â }}
```

*   8ã€æ„é€ æµ‹è¯•ç±»åŠæ–¹æ³•
    

```
@Slf4j@RunWith(SpringRunner.class)@SpringBootTest(classesÂ =Â DemoApplication.class)publicÂ classÂ DemoApplicationTestsÂ {Â Â Â Â @AutowiredÂ Â Â Â privateÂ DisruptorMqServiceÂ disruptorMqService;Â Â Â Â /**Â Â Â Â Â *Â é¡¹ç›®å†…éƒ¨ä½¿ç”¨Disruptoråšæ¶ˆæ¯é˜Ÿåˆ—Â Â Â Â Â *Â @throwsÂ ExceptionÂ Â Â Â Â */Â Â Â Â @TestÂ Â Â Â publicÂ voidÂ sayHelloMqTest()Â throwsÂ Exception{Â Â Â Â Â Â Â Â disruptorMqService.sayHelloMq("æ¶ˆæ¯åˆ°äº†ï¼ŒHelloÂ world!");Â Â Â Â Â Â Â Â log.info("æ¶ˆæ¯é˜Ÿåˆ—å·²å‘é€å®Œæ¯•");Â Â Â Â Â Â Â Â //è¿™é‡Œåœæ­¢2000msæ˜¯ä¸ºäº†ç¡®å®šæ˜¯å¤„ç†æ¶ˆæ¯æ˜¯å¼‚æ­¥çš„Â Â Â Â Â Â Â Â Thread.sleep(2000);Â Â Â Â }}
```

æµ‹è¯•è¿è¡Œç»“æœ

```
2020-04-05Â 14:31:18.543Â Â INFOÂ 7274Â ---Â [Â Â Â Â Â Â Â Â Â Â Â main]Â c.e.u.d.d.s.Impl.DisruptorMqServiceImplÂ Â :Â recordÂ theÂ message:Â æ¶ˆæ¯åˆ°äº†ï¼ŒHelloÂ world!2020-04-05Â 14:31:18.545Â Â INFOÂ 7274Â ---Â [Â Â Â Â Â Â Â Â Â Â  main] c.e.u.d.d.s.Impl.DisruptorMqServiceImpl Â :Â å¾€æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ·»åŠ æ¶ˆæ¯ï¼šMessageModel(message=æ¶ˆæ¯åˆ°äº†ï¼ŒHello world!)2020-04-05Â 14:31:18.545Â Â INFOÂ 7274Â ---Â [Â Â Â Â Â Â Â Â Â Â Â main]Â c.e.utils.demo.DemoApplicationTestsÂ Â Â Â Â Â :Â æ¶ˆæ¯é˜Ÿåˆ—å·²å‘é€å®Œæ¯•2020-04-05Â 14:31:19.547Â Â INFOÂ 7274Â ---Â [pool-1-thread-1]Â c.e.u.d.disrupMq.mq.HelloEventHandlerÂ Â Â Â :Â æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯å¼€å§‹2020-04-05Â 14:31:19.547Â Â INFOÂ 7274Â ---Â [pool-1-thread-1] c.e.u.d.disrupMq.mq.HelloEventHandler Â Â Â :Â æ¶ˆè´¹è€…æ¶ˆè´¹çš„ä¿¡æ¯æ˜¯ï¼šMessageModel(message=æ¶ˆæ¯åˆ°äº†ï¼ŒHello world!)2020-04-05Â 14:31:19.547Â Â INFOÂ 7274Â ---Â [pool-1-thread-1]Â c.e.u.d.disrupMq.mq.HelloEventHandlerÂ Â Â Â :Â æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯ç»“æŸ
```

[14ã€æ€»ç»“](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
--------------------------------------------------------------------------------------------------------------------------------------------

å…¶å® ç”Ÿæˆè€… -> æ¶ˆè´¹è€… æ¨¡å¼æ˜¯å¾ˆå¸¸è§çš„ï¼Œé€šè¿‡ä¸€äº›æ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿå¯ä»¥è½»æ¾åšåˆ°ä¸Šè¿°çš„æ•ˆæœã€‚ä¸åŒçš„åœ°æ–¹åœ¨äºï¼ŒDisruptor æ˜¯åœ¨å†…å­˜ä¸­ä»¥é˜Ÿåˆ—çš„æ–¹å¼å»å®ç°çš„ï¼Œè€Œä¸”æ˜¯æ— é”çš„ã€‚è¿™ä¹Ÿæ˜¯ Disruptor ä¸ºä»€ä¹ˆé«˜æ•ˆçš„åŸå› ã€‚

* * *

æ¬¢è¿åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œå…¨é¢æå‡æŠ€æœ¯èƒ½åŠ›ã€‚

ğŸ‘‰Â åŠ å…¥æ–¹å¼ï¼Œ**â€œ**é•¿æŒ‰**â€ æˆ– â€œ**æ‰«æ**â€ ä¸‹æ–¹äºŒç»´ç å™¢**ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdvrE36I5uQ6ZlawMiahg3UYUmeiaibJrfebfNR8mDWMzmMXB49BMGYiaK7KnsSjGjP7JJoEGoRxZQMMg/640?wx_fmt=png)

æ˜Ÿçƒçš„**å†…å®¹åŒ…æ‹¬**ï¼šé¡¹ç›®å®æˆ˜ã€é¢è¯•æ‹›è˜ã€æºç è§£æã€å­¦ä¹ è·¯çº¿ã€‚

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdWPYr0VKaXztEGHacpRyle64G451XsWx4Ufc9FHYmNTqFdKdtNhyjlhrEC7Pic1dRfue78ib3TiaKBg/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdWPYr0VKaXztEGHacpRylewlfAU6nBKS8tWSIrLcmSicsq0ECUIVnf0JHibsLARrp4Z3ZCh5oSvYMQ/640?wx_fmt=png)![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdWPYr0VKaXztEGHacpRyleptHSrmBV71SbQSolzZpmdqN2q03yLwk1bwZYNu2lr17gFjO0rh1ZdQ/640?wx_fmt=png)![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdWPYr0VKaXztEGHacpRyleYQLfl6qLTABQx5UrP0dXXv6cSv2TmBoouiciaZIXwyD88h5OIsM8lpkw/640?wx_fmt=png)![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdWPYr0VKaXztEGHacpRyleicAvrkTkdGYRubqZdPNkqpoTmtOCQjkItotwtAbCxibsWUI4Dz0ILTEg/640?wx_fmt=png)

```
æ–‡ç« æœ‰å¸®åŠ©çš„è¯ï¼Œåœ¨çœ‹ï¼Œè½¬å‘å§ã€‚

è°¢è°¢æ”¯æŒå“Ÿ (*^__^*ï¼‰

```