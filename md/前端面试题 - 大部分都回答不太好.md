> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/8FogDo-1_gaYYnkCP6vR-g)

第一题：cdn 原理是什么？  

Content Delivery Network，即内容分发网络。

构建在现有网络基础之上的智能虚拟网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。  

CDN 的关键技术主要有内容存储和分发技术。

1、用户向浏览器提供要访问网站的域名，域名解析的请求被发往本地用户使用的 DNS 服务器，本地 DNS 服务器将解析请求转发至网站的 DNS 服务器 (NS)；

2、由于网站的 DNS 服务器 (NS) 对此域名的解析设置了 CNAME，请求最终被指向到 CDN 网络中的 GLB 系统;

3、GLB 系统对域名进行智能解析，将响应速度非常快的节点 IP 返回给用户;

4、浏览器在得到实际的 IP 地址以后，向 CDN 节点发出访问请求;

5、由于是名列前茅次访问，CDN 节点将回到源站获得用户请求的数据并发给用户，同时 CDN 节点根据缓存策略对该数据进行缓存;

6、当有其他用户再次访问同样内容时，CDN 节点直接将数据返回给客户，完成请求 / 服务过程。

第二题：Event Loop 是什么？

事件循环  

js 是单线程 - 进程中只有一个线程在运行。  

进程 - 可以理解为正在运行的程序的实体

线程 - 程序执行流的最小单位，也叫轻量级的进程

microtask - 微任务

微任务：微任务是一次性执行完的。微任务通常来说是需要在当前 task 执行结束后立即执行的任务，例如对一些动作做出反馈或者异步执行任务又不需要分配一个新的 task，这样便可以提高一些性能。只要执行栈中没有其他的 js 代码正在执行了，而且每个宏任务都执行完了，微任务队列会立即执行。如果在微任务执行期间微任务队列加入了新的微任务，会将新的微任务加入队列尾部，之后也会被执行。简单理解，宏任务在下一轮事件循环执行，微任务在本轮事件循环的所有任务结束后执行。

微任务主要包括了：process.nextTick、Promise、MutationObserver

macrotask - 宏任务。

宏任务：需要多次事件循环才能执行完，事件队列中的每一个事件都是一个宏任务。浏览器为了能够使得 js 内部宏任务与 DOM 任务有序的执行，会在一个宏任务执行结束后，在下一个宏执行开始前，对页面进行重新渲染 （task-> 渲染 ->task->…）鼠标点击会触发一个事件回调，需要执行一个宏任务，然后解析 HTML。setTimeout 的作用是等待给定的时间后为它的回调产生一个新的宏任务。

宏任务主要包括了：setTimeout、setInterval、setImmediate、I/O、各种事件（比如鼠标单击事件）的回调函数

3、http 502 是什么？  

HTTP 502 – 网关错误

Web 服务器用作网关或代理服务器时收到了无效响应。