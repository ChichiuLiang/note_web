> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [mp.weixin.qq.com](https://mp.weixin.qq.com/s/l-vYUmUk3NTF_h7w88H1BA)

> ğŸ‘‰ **è¿™æ˜¯ä¸€ä¸ªæˆ–è®¸å¯¹ä½ æœ‰ç”¨****çš„ç¤¾ç¾¤**
> 
> ğŸ± ä¸€å¯¹ä¸€äº¤æµ / é¢è¯•å°å†Œ / ç®€å†ä¼˜åŒ– / æ±‚èŒè§£æƒ‘ï¼Œæ¬¢è¿åŠ å…¥ã€Œ[**èŠ‹é“å¿«é€Ÿå¼€å‘å¹³å°**](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ã€çŸ¥è¯†æ˜Ÿçƒã€‚ä¸‹é¢æ˜¯æ˜Ÿçƒæä¾›çš„éƒ¨åˆ†èµ„æ–™ï¼šÂ 
> 
> *   [ã€Šé¡¹ç›®å®æˆ˜ï¼ˆè§†é¢‘ï¼‰ã€‹](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ï¼šä»ä¹¦ä¸­å­¦ï¼Œå¾€äº‹ä¸Š **â€œç»ƒâ€**
>     
> *   [ã€Šäº’è”ç½‘é«˜é¢‘é¢è¯•é¢˜ã€‹](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ï¼šé¢æœç®€å†å­¦ä¹ ï¼Œæ˜¥æš–èŠ±å¼€
>     
> *   [ã€Šæ¶æ„ x ç³»ç»Ÿè®¾è®¡ã€‹](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ï¼šæ‘§æ¯æ‹‰æœ½ï¼ŒæŒæ§é¢è¯•é«˜é¢‘åœºæ™¯é¢˜
>     
> *   [ã€Šç²¾è¿› Java å­¦ä¹ æŒ‡å—ã€‹](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ï¼šç³»ç»Ÿå­¦ä¹ ï¼Œäº’è”ç½‘ä¸»æµæŠ€æœ¯æ ˆ
>     
> *   [ã€Šå¿…è¯» Java æºç ä¸“æ ã€‹](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247576728&idx=1&sn=1298645b025eb51d9078e8c3de7b3c17&chksm=fa4bd329cd3c5a3fd63e455cf39507d3611a7b040be1381fd5ecfc0a7ce3867575fda4b7313d&scene=21#wechat_redirect)ï¼šçŸ¥å…¶ç„¶ï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶
>     

![](https://mmbiz.qpic.cn/mmbiz_gif/JdLkEI9sZfdWPYr0VKaXztEGHacpRyle7tbZkryrsxIpnAfjRt03ibrcloEZqlRPaVKcb0nD2PrYjtovwOAaFlA/640?wx_fmt=gif)

> ğŸ‘‰**è¿™æ˜¯ä¸€ä¸ªæˆ–è®¸å¯¹ä½ æœ‰ç”¨çš„å¼€æºé¡¹ç›®**
> 
> å›½äº§ Star ç ´ 10w+ çš„å¼€æºé¡¹ç›®ï¼Œå‰ç«¯åŒ…æ‹¬ç®¡ç†åå° + å¾®ä¿¡å°ç¨‹åºï¼Œåç«¯æ”¯æŒå•ä½“å’Œå¾®æœåŠ¡æ¶æ„ã€‚
> 
> åŠŸèƒ½æ¶µç›– RBAC æƒé™ã€SaaS å¤šç§Ÿæˆ·ã€æ•°æ®æƒé™ã€å•†åŸã€æ”¯ä»˜ã€å·¥ä½œæµã€å¤§å±æŠ¥è¡¨ã€å¾®ä¿¡å…¬ä¼—å·ã€CRM ç­‰ç­‰åŠŸèƒ½ï¼š
> 
> *   Boot ä»“åº“ï¼šhttps://gitee.com/zhijiantianya/ruoyi-vue-pro
>     
> *   Cloud ä»“åº“ï¼šhttps://gitee.com/zhijiantianya/yudao-cloud
>     
> *   è§†é¢‘æ•™ç¨‹ï¼šhttps://doc.iocoder.cn
>     
> 
> ã€å›½å†…é¦–æ‰¹ã€‘æ”¯æŒ JDK 21Â + SpringBoot 3.2.0ã€JDK 8 + Spring Boot 2.7.18 åŒç‰ˆæœ¬Â 

[æ¥æºï¼šç å†œå‚ä¸Š](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

*   [åˆ†æ](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [æ”¹é€ ](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    

*   [1ã€æ¥å£è°ƒç”¨](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [2ã€åˆ›å»ºæ–°æ³¨è§£](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [3ã€è‡ªåŠ¨æ³¨å†Œæ ¸å¿ƒ](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [4ã€è‡ªåŠ¨è£…é…](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    

*   [æµ‹è¯•](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    
*   [æœ€å](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
    

[![](https://mmbiz.qpic.cn/mmbiz_jpg/CKvMdchsUwngM6C0Owun0IhKyibcOQHDFP0xgyeEwAsj7LBcmzsjc1oQ6zws1ZSYM78MhqqibZDvEoLicZgpF6wzA/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)

* * *

xxl-job æ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„ä»»åŠ¡è°ƒåº¦ä¸­é—´ä»¶ï¼Œè½»é‡çº§ã€ä½¿ç”¨ç®€å•ã€æ”¯æŒåˆ†å¸ƒå¼ç­‰ä¼˜ç‚¹ï¼Œè®©å®ƒå¹¿æ³›åº”ç”¨åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œè§£å†³äº†ä¸å°‘å®šæ—¶ä»»åŠ¡çš„è°ƒåº¦é—®é¢˜ã€‚

æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­éœ€è¦å…ˆåˆ° xxl-job çš„ä»»åŠ¡è°ƒåº¦ä¸­å¿ƒé¡µé¢ä¸Šï¼Œé…ç½®**æ‰§è¡Œå™¨ executor**Â å’Œå…·ä½“çš„**ä»»åŠ¡ job**Â ï¼Œè¿™ä¸€è¿‡ç¨‹å¦‚æœé¡¹ç›®ä¸­çš„å®šæ—¶ä»»åŠ¡æ•°é‡ä¸å¤šè¿˜å¥½è¯´ï¼Œå¦‚æœä»»åŠ¡å¤šäº†çš„è¯è¿˜æ˜¯æŒºè´¹å·¥å¤«çš„ã€‚

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdPlFS3dmnRl67ZOiaoR5p2J8DyhcI1XAyYvZWf2xc71GwuFxeqiaqfU6jylick294c1gfh7zkrz5hfQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

å‡è®¾é¡¹ç›®ä¸­æœ‰ä¸Šç™¾ä¸ªè¿™æ ·çš„å®šæ—¶ä»»åŠ¡ï¼Œé‚£ä¹ˆæ¯ä¸ªä»»åŠ¡éƒ½éœ€è¦èµ°ä¸€éç»‘å®š`jobHander`åç«¯æ¥å£ï¼Œå¡«å†™`cron`è¡¨è¾¾å¼è¿™ä¸ªæµç¨‹â€¦

æˆ‘å°±æƒ³é—®é—®ï¼Œå¡«å¤šäº†è°èƒ½ä¸è¿·ç³Šï¼Ÿ

äºæ˜¯å‡ºäºåŠŸèƒ½ä¼˜åŒ–ï¼ˆ**å·æ‡’**Â ï¼‰è¿™ä¸€åŠ¨æœºï¼Œå‰å‡ å¤©æˆ‘èŒç”Ÿäº†ä¸€ä¸ªæƒ³æ³•ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•èƒ½å¤Ÿå‘Šåˆ« xxl-job çš„ç®¡ç†é¡µé¢ï¼Œèƒ½å¤Ÿè®©æˆ‘ä¸å†éœ€è¦åˆ°é¡µé¢ä¸Šå»æ‰‹åŠ¨æ³¨å†Œæ‰§è¡Œå™¨å’Œä»»åŠ¡ï¼Œå®ç°è®©å®ƒä»¬è‡ªåŠ¨æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒå‘¢ã€‚

[åˆ†æ](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
-----------------------------------------------------------------------------------------------------------------------------------------

åˆ†æä¸€ä¸‹ï¼Œå…¶å®æˆ‘ä»¬è¦åšçš„å¾ˆç®€å•ï¼Œåªè¦åœ¨é¡¹ç›®å¯åŠ¨æ—¶ä¸»åŠ¨æ³¨å†Œ`executor`å’Œå„ä¸ª`jobHandler`åˆ°è°ƒåº¦ä¸­å¿ƒå°±å¯ä»¥äº†ï¼Œæµç¨‹å¦‚ä¸‹ï¼š

![](https://mmbiz.qpic.cn/mmbiz_jpg/JdLkEI9sZfdPlFS3dmnRl67ZOiaoR5p2J8uyW1sWoND7NfYrw5TcXILPcct7Lqn7QdkbuZ69RaYeje2NpO3mI1A/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

æœ‰çš„å°ä¼™ä¼´ä»¬å¯èƒ½è¦é—®äº†ï¼Œæˆ‘åœ¨é¡µé¢ä¸Šåˆ›å»º**æ‰§è¡Œå™¨**Â çš„æ—¶å€™ï¼Œä¸æ˜¯æœ‰ä¸€ä¸ªé€‰é¡¹å«åš**è‡ªåŠ¨æ³¨å†Œ**Â å—ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¿™é‡Œè¿˜è¦è‡ªå·±æ·»åŠ æ–°æ‰§è¡Œå™¨ï¼Ÿ

å…¶å®è¿™é‡Œæœ‰ä¸ªè¯¯åŒºï¼Œè¿™é‡Œçš„è‡ªåŠ¨æ³¨å†ŒæŒ‡çš„æ˜¯ä¼šæ ¹æ®é¡¹ç›®ä¸­é…ç½®çš„`xxl.job.executor.appname`ï¼Œå°†é…ç½®çš„æœºå™¨åœ°å€è‡ªåŠ¨æ³¨å†Œåˆ°è¿™ä¸ªæ‰§è¡Œå™¨çš„åœ°å€åˆ—è¡¨ä¸­ã€‚ä½†æ˜¯å¦‚æœä½ ä¹‹å‰æ²¡æœ‰æ‰‹åŠ¨åˆ›å»ºè¿‡æ‰§è¡Œå™¨ï¼Œé‚£ä¹ˆæ˜¯ä¸ä¼šç»™ä½ è‡ªåŠ¨æ·»åŠ ä¸€ä¸ªæ–°æ‰§è¡Œå™¨åˆ°è°ƒåº¦ä¸­å¿ƒçš„ã€‚

æ—¢ç„¶æœ‰äº†æƒ³æ³•å’±ä»¬å°±ç›´æ¥å¼€å¹²ï¼Œå…ˆåˆ° github ä¸Šæ‹‰ä¸€ä»½ xxl-job çš„æºç ä¸‹æ¥ï¼š

> https://github.com/xuxueli/xxl-job

æ•´ä¸ªé¡¹ç›®å¯¼å…¥ idea åï¼Œå…ˆçœ‹ä¸€ä¸‹ç»“æ„ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdPlFS3dmnRl67ZOiaoR5p2JEZkl1qjiav8gFGsibhJ6ibgjoIUkp4JZElUmn8CtdnfAxQQPCCQiazKxXQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

ç»“åˆç€æ–‡æ¡£å’Œä»£ç ï¼Œå…ˆæ¢³ç†ä¸€ä¸‹å„ä¸ªæ¨¡å—éƒ½æ˜¯å¹²ä»€ä¹ˆçš„ï¼š

*   `xxl-job-admin`ï¼šä»»åŠ¡è°ƒåº¦ä¸­å¿ƒï¼Œå¯åŠ¨åå°±å¯ä»¥è®¿é—®ç®¡ç†é¡µé¢ï¼Œè¿›è¡Œæ‰§è¡Œå™¨å’Œä»»åŠ¡çš„æ³¨å†Œã€ä»¥åŠä»»åŠ¡è°ƒç”¨ç­‰åŠŸèƒ½äº†
    
*   `xxl-job-core`ï¼šå…¬å…±ä¾èµ–ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨åˆ° xxl-job æ—¶è¦å¼•å…¥çš„ä¾èµ–åŒ…
    
*   `xxl-job-executor-samples`ï¼šæ‰§è¡Œç¤ºä¾‹ï¼Œåˆ†åˆ«åŒ…å«äº† springboot ç‰ˆæœ¬å’Œä¸ä½¿ç”¨æ¡†æ¶çš„ç‰ˆæœ¬
    

ä¸ºäº†å¼„æ¸…æ¥šæ³¨å†Œå’ŒæŸ¥è¯¢`executor`å’Œ`jobHandler`è°ƒç”¨çš„æ˜¯å“ªäº›æ¥å£ï¼Œæˆ‘ä»¬å…ˆä»é¡µé¢ä¸Šå»æŠ“ä¸€ä¸ªè¯·æ±‚çœ‹çœ‹ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdPlFS3dmnRl67ZOiaoR5p2J2GicvQGpqaPSiaykBxC7lsEcicNXk4RXso0oajT98zYdclERkjxaSKEww/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

å¥½äº†ï¼Œè¿™æ ·å°±èƒ½å®šä½åˆ°`xxl-job-admin`æ¨¡å—ä¸­`/jobgroup/save`è¿™ä¸ªæ¥å£ï¼Œæ¥ä¸‹æ¥å¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰¾åˆ°æºç ä½ç½®ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdPlFS3dmnRl67ZOiaoR5p2JqKKIFkTNpNz0ficKf6KAo5UiblicsNlIQMeryWHgsEmrJWVicqQlia4oY6w/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œå¯ä»¥æ‰¾åˆ°ä¸‹é¢è¿™å‡ ä¸ªå…³é”®æ¥å£ï¼š

*   `/jobgroup/pageList`ï¼šæ‰§è¡Œå™¨åˆ—è¡¨çš„æ¡ä»¶æŸ¥è¯¢
    
*   `/jobgroup/save`ï¼šæ·»åŠ æ‰§è¡Œå™¨
    
*   `/jobinfo/pageList`ï¼šä»»åŠ¡åˆ—è¡¨çš„æ¡ä»¶æŸ¥è¯¢
    
*   `/jobinfo/add`ï¼šæ·»åŠ ä»»åŠ¡
    

ä½†æ˜¯å¦‚æœç›´æ¥è°ƒç”¨è¿™äº›æ¥å£ï¼Œé‚£ä¹ˆå°±ä¼šå‘ç°å®ƒä¼šè·³è½¬åˆ°`xxl-job-admin`çš„çš„ç™»å½•é¡µé¢ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdPlFS3dmnRl67ZOiaoR5p2JtpNib30VOyaFraoQXgbWcn0eMZuz40jTNuFbgwWDYVSBmmbV5OgW9Ag/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

å…¶å®æƒ³æƒ³ä¹Ÿæ˜ç™½ï¼Œå‡ºäºå®‰å…¨æ€§è€ƒè™‘ï¼Œè°ƒåº¦ä¸­å¿ƒçš„æ¥å£ä¹Ÿä¸å¯èƒ½å…è®¸è£¸è°ƒçš„ã€‚é‚£ä¹ˆå†å›å¤´çœ‹ä¸€ä¸‹åˆšæ‰é¡µé¢ä¸Šçš„è¯·æ±‚å°±ä¼šå‘ç°ï¼Œå®ƒåœ¨`Headers`ä¸­æ·»åŠ äº†ä¸€æ¡åä¸º`XXL_JOB_LOGIN_IDENTITY`çš„`cookie`ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdPlFS3dmnRl67ZOiaoR5p2JiccPVDibsHzvdd0w8Ivqx3RLJSRyqkIkrH8QW5Z6ia0q4cLtDeicAruLjg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

è‡³äºè¿™æ¡`cookie`ï¼Œåˆ™æ˜¯åœ¨é€šè¿‡ç”¨æˆ·åå’Œå¯†ç è°ƒç”¨è°ƒåº¦ä¸­å¿ƒçš„`/login`æ¥å£æ—¶è¿”å›çš„ï¼Œåœ¨è¿”å›çš„`response`å¯ä»¥ç›´æ¥æ‹¿åˆ°ã€‚åªè¦ä¿å­˜ä¸‹æ¥ï¼Œå¹¶åœ¨ä¹‹åæ¯æ¬¡è¯·æ±‚æ—¶æºå¸¦ï¼Œå°±èƒ½å¤Ÿæ­£å¸¸è®¿é—®å…¶ä»–æ¥å£äº†ã€‚

åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦çš„ 5 ä¸ªæ¥å£å°±åŸºæœ¬å‡†å¤‡é½äº†ï¼Œæ¥ä¸‹æ¥å‡†å¤‡å¼€å§‹æ­£å¼çš„æ”¹é€ å·¥ä½œã€‚

> åŸºäº Spring Boot + MyBatis Plus + Vue & Element å®ç°çš„åå°ç®¡ç†ç³»ç»Ÿ + ç”¨æˆ·å°ç¨‹åºï¼Œæ”¯æŒ RBAC åŠ¨æ€æƒé™ã€å¤šç§Ÿæˆ·ã€æ•°æ®æƒé™ã€å·¥ä½œæµã€ä¸‰æ–¹ç™»å½•ã€æ”¯ä»˜ã€çŸ­ä¿¡ã€å•†åŸç­‰åŠŸèƒ½
> 
> *   é¡¹ç›®åœ°å€ï¼šhttps://github.com/YunaiV/ruoyi-vue-pro
>     
> *   è§†é¢‘æ•™ç¨‹ï¼šhttps://doc.iocoder.cn/video/
>     

[æ”¹é€ ](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
-----------------------------------------------------------------------------------------------------------------------------------------

æˆ‘ä»¬æ”¹é€ çš„ç›®çš„æ˜¯å®ç°ä¸€ä¸ª`starter`ï¼Œä»¥ååªè¦å¼•å…¥è¿™ä¸ª`starter`å°±èƒ½å®ç°`executor`å’Œ`jobHandler`çš„è‡ªåŠ¨æ³¨å†Œï¼Œè¦å¼•å…¥çš„å…³é”®ä¾èµ–æœ‰ä¸‹é¢ä¸¤ä¸ªï¼š

```
<dependency>
Â Â Â Â <groupId>com.xuxueli</groupId>
Â Â Â Â <artifactId>xxl-job-core</artifactId>
Â Â Â Â <version>2.3.0</version>
</dependency>

<dependency>
Â Â Â Â <groupId>org.springframework.boot</groupId>
Â Â Â Â <artifactId>spring-boot-autoconfigure</artifactId>
</dependency>


```

### [1ã€æ¥å£è°ƒç”¨](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

åœ¨è°ƒç”¨è°ƒåº¦ä¸­å¿ƒçš„æ¥å£å‰ï¼Œå…ˆæŠŠ`xxl-job-admin`æ¨¡å—ä¸­çš„`XxlJobInfo`å’Œ`XxlJobGroup`è¿™ä¸¤ä¸ªç±»æ‹¿åˆ°æˆ‘ä»¬çš„ starter é¡¹ç›®ä¸­ï¼Œç”¨äºæ¥æ”¶æ¥å£è°ƒç”¨çš„ç»“æœã€‚

#### [ç™»å½•æ¥å£](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

åˆ›å»ºä¸€ä¸ª`JobLoginService`ï¼Œåœ¨è°ƒç”¨ä¸šåŠ¡æ¥å£å‰ï¼Œéœ€è¦é€šè¿‡ç™»å½•æ¥å£è·å–`cookie`ï¼Œå¹¶åœ¨è·å–åˆ°`cookie`åï¼Œç¼“å­˜åˆ°æœ¬åœ°çš„`Map`ä¸­ã€‚

```
privateÂ finalÂ Map<String,String>Â loginCookie=newÂ HashMap<>();

publicÂ voidÂ login()Â {
Â Â Â Â StringÂ url=adminAddresses+"/login";
Â Â Â Â HttpResponseÂ responseÂ =Â HttpRequest.post(url)
Â Â Â Â Â Â Â Â Â Â Â Â .form("userName",username)
Â Â Â Â Â Â Â Â Â Â Â Â .form("password",password)
Â Â Â Â Â Â Â Â Â Â Â Â .execute();
Â Â Â Â List<HttpCookie>Â cookiesÂ =Â response.getCookies();
Â Â Â Â Optional<HttpCookie>Â cookieOptÂ =Â cookies.stream()
Â Â Â Â Â Â Â Â Â Â Â Â .filter(cookieÂ ->Â cookie.getName().equals("XXL_JOB_LOGIN_IDENTITY")).findFirst();
Â Â Â Â ifÂ (!cookieOpt.isPresent())
Â Â Â Â Â Â Â Â throwÂ newÂ RuntimeException("getÂ xxl-jobÂ cookieÂ error!");

Â Â Â Â StringÂ valueÂ =Â cookieOpt.get().getValue();
Â Â Â Â loginCookie.put("XXL_JOB_LOGIN_IDENTITY",value);
}


```

å…¶ä»–æ¥å£åœ¨è°ƒç”¨æ—¶ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–`cookie`ï¼Œå¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨åˆ™è°ƒç”¨`/login`æ¥å£ï¼Œä¸ºäº†é¿å…è¿™ä¸€è¿‡ç¨‹å¤±è´¥ï¼Œå…è®¸æœ€å¤šé‡è¯• 3 æ¬¡ã€‚

```
publicÂ StringÂ getCookie()Â {
Â Â Â Â forÂ (intÂ iÂ =Â 0;Â iÂ <Â 3;Â i++)Â {
Â Â Â Â Â Â Â Â StringÂ cookieStrÂ =Â loginCookie.get("XXL_JOB_LOGIN_IDENTITY");
Â Â Â Â Â Â Â Â ifÂ (cookieStrÂ !=null)Â {
Â Â Â Â Â Â Â Â Â Â Â Â returnÂ "XXL_JOB_LOGIN_IDENTITY="+cookieStr;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â login();
Â Â Â Â }
Â Â Â Â throwÂ newÂ RuntimeException("getÂ xxl-jobÂ cookieÂ error!");
}


```

#### [æ‰§è¡Œå™¨æ¥å£](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

åˆ›å»ºä¸€ä¸ª`JobGroupService`ï¼Œæ ¹æ®`appName`å’Œæ‰§è¡Œå™¨åç§°`title`æŸ¥è¯¢æ‰§è¡Œå™¨åˆ—è¡¨ï¼š

```
publicÂ List<XxlJobGroup>Â getJobGroup()Â {
Â Â Â Â StringÂ url=adminAddresses+"/jobgroup/pageList";
Â Â Â Â HttpResponseÂ responseÂ =Â HttpRequest.post(url)
Â Â Â Â Â Â Â Â Â Â Â Â .form("appname",Â appName)
Â Â Â Â Â Â Â Â Â Â Â Â .form("title",Â title)
Â Â Â Â Â Â Â Â Â Â Â Â .cookie(jobLoginService.getCookie())
Â Â Â Â Â Â Â Â Â Â Â Â .execute();

Â Â Â Â StringÂ bodyÂ =Â response.body();
Â Â Â Â JSONArrayÂ arrayÂ =Â JSONUtil.parse(body).getByPath("data",Â JSONArray.class);
Â Â Â Â List<XxlJobGroup>Â listÂ =Â array.stream()
Â Â Â Â Â Â Â Â Â Â Â Â .map(oÂ ->Â JSONUtil.toBean((JSONObject)Â o,Â XxlJobGroup.class))
Â Â Â Â Â Â Â Â Â Â Â Â .collect(Collectors.toList());
Â Â Â Â returnÂ list;
}


```

æˆ‘ä»¬åœ¨åé¢è¦æ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„`appName`å’Œ`title`åˆ¤æ–­å½“å‰æ‰§è¡Œå™¨æ˜¯å¦å·²ç»è¢«æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒè¿‡ï¼Œå¦‚æœå·²ç»æ³¨å†Œè¿‡é‚£ä¹ˆåˆ™è·³è¿‡ï¼Œè€Œ`/jobgroup/pageList`æ¥å£æ˜¯ä¸€ä¸ªæ¨¡ç³ŠæŸ¥è¯¢æ¥å£ï¼Œæ‰€ä»¥åœ¨æŸ¥è¯¢åˆ—è¡¨çš„ç»“æœåˆ—è¡¨ä¸­ï¼Œè¿˜éœ€è¦å†è¿›è¡Œä¸€æ¬¡ç²¾ç¡®åŒ¹é…ã€‚

```
publicÂ booleanÂ preciselyCheck()Â {
Â Â Â Â List<XxlJobGroup>Â jobGroupÂ =Â getJobGroup();
Â Â Â Â Optional<XxlJobGroup>Â hasÂ =Â jobGroup.stream()
Â Â Â Â Â Â Â Â Â Â Â Â .filter(xxlJobGroupÂ ->Â xxlJobGroup.getAppname().equals(appName)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &&Â xxlJobGroup.getTitle().equals(title))
Â Â Â Â Â Â Â Â Â Â Â Â .findAny();
Â Â Â Â returnÂ has.isPresent();
}


```

æ³¨å†Œæ–°`executor`åˆ°è°ƒåº¦ä¸­å¿ƒï¼š

```
publicÂ booleanÂ autoRegisterGroup()Â {
Â Â Â Â StringÂ url=adminAddresses+"/jobgroup/save";
Â Â Â Â HttpResponseÂ responseÂ =Â HttpRequest.post(url)
Â Â Â Â Â Â Â Â Â Â Â Â .form("appname",Â appName)
Â Â Â Â Â Â Â Â Â Â Â Â .form("title",Â title)
Â Â Â Â Â Â Â Â Â Â Â Â .cookie(jobLoginService.getCookie())
Â Â Â Â Â Â Â Â Â Â Â Â .execute();
Â Â Â Â ObjectÂ codeÂ =Â JSONUtil.parse(response.body()).getByPath("code");
Â Â Â Â returnÂ code.equals(200);
}


```

#### [ä»»åŠ¡æ¥å£](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

åˆ›å»ºä¸€ä¸ª`JobInfoService`ï¼Œæ ¹æ®æ‰§è¡Œå™¨`id`ï¼Œ`jobHandler`åç§°æŸ¥è¯¢ä»»åŠ¡åˆ—è¡¨ï¼Œå’Œä¸Šé¢ä¸€æ ·ï¼Œä¹Ÿæ˜¯æ¨¡ç³ŠæŸ¥è¯¢ï¼š

```
publicÂ List<XxlJobInfo>Â getJobInfo(IntegerÂ jobGroupId,StringÂ executorHandler)Â {
Â Â Â Â StringÂ url=adminAddresses+"/jobinfo/pageList";
Â Â Â Â HttpResponseÂ responseÂ =Â HttpRequest.post(url)
Â Â Â Â Â Â Â Â Â Â Â Â .form("jobGroup",Â jobGroupId)
Â Â Â Â Â Â Â Â Â Â Â Â .form("executorHandler",Â executorHandler)
Â Â Â Â Â Â Â Â Â Â Â Â .form("triggerStatus",Â -1)
Â Â Â Â Â Â Â Â Â Â Â Â .cookie(jobLoginService.getCookie())
Â Â Â Â Â Â Â Â Â Â Â Â .execute();

Â Â Â Â StringÂ bodyÂ =Â response.body();
Â Â Â Â JSONArrayÂ arrayÂ =Â JSONUtil.parse(body).getByPath("data",Â JSONArray.class);
Â Â Â Â List<XxlJobInfo>Â listÂ =Â array.stream()
Â Â Â Â Â Â Â Â Â Â Â Â .map(oÂ ->Â JSONUtil.toBean((JSONObject)Â o,Â XxlJobInfo.class))
Â Â Â Â Â Â Â Â Â Â Â Â .collect(Collectors.toList());

Â Â Â Â returnÂ list;
}


```

æ³¨å†Œä¸€ä¸ªæ–°ä»»åŠ¡ï¼Œæœ€ç»ˆè¿”å›åˆ›å»ºçš„æ–°ä»»åŠ¡çš„`id`ï¼š

```
publicÂ IntegerÂ addJobInfo(XxlJobInfoÂ xxlJobInfo)Â {
Â Â Â Â StringÂ url=adminAddresses+"/jobinfo/add";
Â Â Â Â Map<String,Â Object>Â paramMapÂ =Â BeanUtil.beanToMap(xxlJobInfo);
Â Â Â Â HttpResponseÂ responseÂ =Â HttpRequest.post(url)
Â Â Â Â Â Â Â Â Â Â Â Â .form(paramMap)
Â Â Â Â Â Â Â Â Â Â Â Â .cookie(jobLoginService.getCookie())
Â Â Â Â Â Â Â Â Â Â Â Â .execute();

Â Â Â Â JSONÂ jsonÂ =Â JSONUtil.parse(response.body());
Â Â Â Â ObjectÂ codeÂ =Â json.getByPath("code");
Â Â Â Â ifÂ (code.equals(200)){
Â Â Â Â Â Â Â Â returnÂ Convert.toInt(json.getByPath("content"));
Â Â Â Â }
Â Â Â Â throwÂ newÂ RuntimeException("addÂ jobInfoÂ error!");
}


```

### [2ã€åˆ›å»ºæ–°æ³¨è§£](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

åœ¨åˆ›å»ºä»»åŠ¡æ—¶ï¼Œå¿…å¡«å­—æ®µé™¤äº†æ‰§è¡Œå™¨å’Œ`jobHandler`ä¹‹å¤–ï¼Œè¿˜æœ‰**ä»»åŠ¡æè¿°**Â ã€**è´Ÿè´£äºº**Â ã€**Cron è¡¨è¾¾å¼**Â ã€**è°ƒåº¦ç±»å‹**Â ã€**è¿è¡Œæ¨¡å¼**Â ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é»˜è®¤è°ƒåº¦ç±»å‹ä¸º`CRON`ã€è¿è¡Œæ¨¡å¼ä¸º`BEAN`ï¼Œå¦å¤–çš„ 3 ä¸ªå­—æ®µçš„ä¿¡æ¯éœ€è¦ç”¨æˆ·æŒ‡å®šã€‚

å› æ­¤æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°æ³¨è§£`@XxlRegister`ï¼Œæ¥é…åˆåŸç”Ÿçš„`@XxlJob`æ³¨è§£è¿›è¡Œä½¿ç”¨ï¼Œå¡«å†™è¿™å‡ ä¸ªå­—æ®µçš„ä¿¡æ¯ï¼š

```
@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
publicÂ @interfaceÂ XxlRegisterÂ {
Â Â Â Â StringÂ cron();
Â Â Â Â StringÂ jobDesc()Â defaultÂ "defaultÂ jobDesc";
Â Â Â Â StringÂ author()Â defaultÂ "defaultÂ Author";
Â Â Â Â intÂ triggerStatus()Â defaultÂ 0;
}


```

æœ€åï¼Œé¢å¤–æ·»åŠ äº†ä¸€ä¸ª`triggerStatus`å±æ€§ï¼Œè¡¨ç¤ºä»»åŠ¡çš„é»˜è®¤è°ƒåº¦çŠ¶æ€ï¼Œ0 ä¸ºåœæ­¢çŠ¶æ€ï¼Œ1 ä¸ºè¿è¡ŒçŠ¶æ€ã€‚

### [3ã€è‡ªåŠ¨æ³¨å†Œæ ¸å¿ƒ](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

åŸºæœ¬å‡†å¤‡å·¥ä½œåšå®Œåï¼Œä¸‹é¢å®ç°è‡ªåŠ¨æ³¨å†Œæ‰§è¡Œå™¨å’Œ`jobHandler`çš„æ ¸å¿ƒä»£ç ã€‚æ ¸å¿ƒç±»å®ç°`ApplicationListener`æ¥å£ï¼Œåœ¨æ¥æ”¶åˆ°`ApplicationReadyEvent`äº‹ä»¶åå¼€å§‹æ‰§è¡Œè‡ªåŠ¨æ³¨å†Œé€»è¾‘ã€‚

```
@Component
publicÂ classÂ XxlJobAutoRegisterÂ implementsÂ ApplicationListener<ApplicationReadyEvent>,Â 
Â Â Â Â Â Â Â Â ApplicationContextAwareÂ {
Â Â Â Â privateÂ staticÂ finalÂ LogÂ logÂ =LogFactory.get();
Â Â Â Â privateÂ ApplicationContextÂ applicationContext;
Â Â Â Â @Autowired
Â Â Â Â privateÂ JobGroupServiceÂ jobGroupService;
Â Â Â Â @Autowired
Â Â Â Â privateÂ JobInfoServiceÂ jobInfoService;

Â Â Â Â @Override
Â Â Â Â publicÂ voidÂ setApplicationContext(ApplicationContextÂ applicationContext)Â throwsÂ BeansExceptionÂ {
Â Â Â Â Â Â Â Â this.applicationContext=applicationContext;
Â Â Â Â }

Â Â Â Â @Override
Â Â Â Â publicÂ voidÂ onApplicationEvent(ApplicationReadyEventÂ event)Â {
Â Â Â Â Â Â Â Â addJobGroup();//æ³¨å†Œæ‰§è¡Œå™¨
Â Â Â Â Â Â Â Â addJobInfo();//æ³¨å†Œä»»åŠ¡
Â Â Â Â }
}


```

è‡ªåŠ¨æ³¨å†Œæ‰§è¡Œå™¨çš„ä»£ç éå¸¸ç®€å•ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„`appName`å’Œ`title`ç²¾ç¡®åŒ¹é…æŸ¥çœ‹è°ƒåº¦ä¸­å¿ƒæ˜¯å¦å·²æœ‰æ‰§è¡Œå™¨è¢«æ³¨å†Œè¿‡äº†ï¼Œå¦‚æœå­˜åœ¨åˆ™è·³è¿‡ï¼Œä¸å­˜åœ¨åˆ™æ–°æ³¨å†Œä¸€ä¸ªï¼š

```
privateÂ voidÂ addJobGroup()Â {
Â Â Â Â ifÂ (jobGroupService.preciselyCheck())
Â Â Â Â Â Â Â Â return;

Â Â Â Â if(jobGroupService.autoRegisterGroup())
Â Â Â Â Â Â Â Â log.info("autoÂ registerÂ xxl-jobÂ groupÂ success!");
}


```

è‡ªåŠ¨æ³¨å†Œä»»åŠ¡çš„é€»è¾‘åˆ™ç›¸å¯¹å¤æ‚ä¸€äº›ï¼Œéœ€è¦å®Œæˆï¼š

*   é€šè¿‡`applicationContext`æ‹¿åˆ° spring å®¹å™¨ä¸­çš„æ‰€æœ‰ beanï¼Œå†æ‹¿åˆ°è¿™äº› bean ä¸­æ‰€æœ‰æ·»åŠ äº†`@XxlJob`æ³¨è§£çš„æ–¹æ³•
    
*   å¯¹ä¸Šé¢è·å–åˆ°çš„æ–¹æ³•è¿›è¡Œæ£€æŸ¥ï¼Œæ˜¯å¦æ·»åŠ äº†æˆ‘ä»¬è‡ªå®šä¹‰çš„`@XxlRegister`æ³¨è§£ï¼Œå¦‚æœæ²¡æœ‰åˆ™è·³è¿‡ï¼Œä¸è¿›è¡Œè‡ªåŠ¨æ³¨å†Œ
    
*   å¯¹åŒæ—¶æ·»åŠ äº†`@XxlJob`å’Œ`@XxlRegister`çš„æ–¹æ³•ï¼Œé€šè¿‡æ‰§è¡Œå™¨ id å’Œ`jobHandler`çš„å€¼åˆ¤æ–­æ˜¯å¦å·²ç»åœ¨è°ƒåº¦ä¸­å¿ƒæ³¨å†Œè¿‡äº†ï¼Œå¦‚æœå·²å­˜åœ¨åˆ™è·³è¿‡
    
*   å¯¹äºæ»¡è¶³æ³¨è§£æ¡ä»¶ä¸”æ²¡æœ‰æ³¨å†Œè¿‡çš„`jobHandler`ï¼Œè°ƒç”¨æ¥å£æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒ
    

å…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```
privateÂ voidÂ addJobInfo()Â {
Â Â Â Â List<XxlJobGroup>Â jobGroupsÂ =Â jobGroupService.getJobGroup();
Â Â Â Â XxlJobGroupÂ xxlJobGroupÂ =Â jobGroups.get(0);

Â Â Â Â String[]Â beanDefinitionNamesÂ =Â applicationContext.getBeanNamesForType(Object.class,Â false,Â true);
Â Â Â Â forÂ (StringÂ beanDefinitionNameÂ :Â beanDefinitionNames)Â {
Â Â Â Â Â Â Â Â ObjectÂ beanÂ =Â applicationContext.getBean(beanDefinitionName);

Â Â Â Â Â Â Â Â Map<Method,Â XxlJob>Â annotatedMethodsÂ Â =Â MethodIntrospector.selectMethods(bean.getClass(),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â newÂ MethodIntrospector.MetadataLookup<XxlJob>()Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â @Override
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â publicÂ XxlJobÂ inspect(MethodÂ method)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â returnÂ AnnotatedElementUtils.findMergedAnnotation(method,Â XxlJob.class);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â forÂ (Map.Entry<Method,Â XxlJob>Â methodXxlJobEntryÂ :Â annotatedMethods.entrySet())Â {
Â Â Â Â Â Â Â Â Â Â Â Â MethodÂ executeMethodÂ =Â methodXxlJobEntry.getKey();
Â Â Â Â Â Â Â Â Â Â Â Â XxlJobÂ xxlJobÂ =Â methodXxlJobEntry.getValue();

Â Â Â Â Â Â Â Â Â Â Â Â //è‡ªåŠ¨æ³¨å†Œ
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (executeMethod.isAnnotationPresent(XxlRegister.class))Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â XxlRegisterÂ xxlRegisterÂ =Â executeMethod.getAnnotation(XxlRegister.class);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â List<XxlJobInfo>Â jobInfoÂ =Â jobInfoService.getJobInfo(xxlJobGroup.getId(),Â xxlJob.value());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (!jobInfo.isEmpty()){
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //å› ä¸ºæ˜¯æ¨¡ç³ŠæŸ¥è¯¢ï¼Œéœ€è¦å†åˆ¤æ–­ä¸€æ¬¡
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Optional<XxlJobInfo>Â firstÂ =Â jobInfo.stream()
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .filter(xxlJobInfoÂ ->Â xxlJobInfo.getExecutorHandler().equals(xxlJob.value()))
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .findFirst();
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (first.isPresent())
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â continue;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â XxlJobInfoÂ xxlJobInfoÂ =Â createXxlJobInfo(xxlJobGroup,Â xxlJob,Â xxlRegister);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â IntegerÂ jobInfoIdÂ =Â jobInfoService.addJobInfo(xxlJobInfo);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â }
}


```

### [4ã€è‡ªåŠ¨è£…é…](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

åˆ›å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œç”¨äºæ‰«æ`bean`ï¼š

```
@Configuration
@ComponentScan(basePackagesÂ =Â "com.xxl.job.plus.executor")
publicÂ classÂ XxlJobPlusConfigÂ {
}


```

å°†å®ƒæ·»åŠ åˆ°`META-INF/spring.factories`æ–‡ä»¶ï¼š

```
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
Â Â com.xxl.job.plus.executor.config.XxlJobPlusConfig


```

åˆ°è¿™é‡Œ`starter`çš„ç¼–å†™å°±å®Œæˆäº†ï¼Œå¯ä»¥é€šè¿‡ maven å‘å¸ƒ jar åŒ…åˆ°æœ¬åœ°æˆ–è€…ç§æœï¼š

```
mvnÂ cleanÂ install/deploy


```

> åŸºäº Spring Cloud Alibaba + Gateway + Nacos + RocketMQ + Vue & Element å®ç°çš„åå°ç®¡ç†ç³»ç»Ÿ + ç”¨æˆ·å°ç¨‹åºï¼Œæ”¯æŒ RBAC åŠ¨æ€æƒé™ã€å¤šç§Ÿæˆ·ã€æ•°æ®æƒé™ã€å·¥ä½œæµã€ä¸‰æ–¹ç™»å½•ã€æ”¯ä»˜ã€çŸ­ä¿¡ã€å•†åŸç­‰åŠŸèƒ½
> 
> *   é¡¹ç›®åœ°å€ï¼šhttps://github.com/YunaiV/yudao-cloud
>     
> *   è§†é¢‘æ•™ç¨‹ï¼šhttps://doc.iocoder.cn/video/
>     

[æµ‹è¯•](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
-----------------------------------------------------------------------------------------------------------------------------------------

æ–°å»ºä¸€ä¸ª springboot é¡¹ç›®ï¼Œå¼•å…¥æˆ‘ä»¬åœ¨ä¸Šé¢æ‰“å¥½çš„åŒ…ï¼š

```
<dependency>
Â Â Â Â <groupId>com.cn.hydra</groupId>
Â Â Â Â <artifactId>xxljob-autoregister-spring-boot-starter</artifactId>
Â Â Â Â <version>0.0.1</version>
</dependency>


```

åœ¨`application.properties`ä¸­é…ç½® xxl-job çš„ä¿¡æ¯ï¼Œé¦–å…ˆæ˜¯åŸç”Ÿçš„é…ç½®å†…å®¹ï¼š

```
xxl.job.admin.addresses=http://127.0.0.1:8080/xxl-job-admin
xxl.job.accessToken=default_token
xxl.job.executor.appname=xxl-job-executor-test
xxl.job.executor.address=
xxl.job.executor.ip=127.0.0.1
xxl.job.executor.port=9999
xxl.job.executor.logpath=/data/applogs/xxl-job/jobhandler
xxl.job.executor.logretentiondays=30


```

æ­¤å¤–è¿˜è¦é¢å¤–æ·»åŠ æˆ‘ä»¬è‡ªå·±çš„ starter è¦æ±‚çš„æ–°é…ç½®å†…å®¹ï¼š

```
#Â adminç”¨æˆ·å
xxl.job.admin.username=admin
#Â adminÂ å¯†ç 
xxl.job.admin.password=123456
#Â æ‰§è¡Œå™¨åç§°
xxl.job.executor.title=test-title


```

å®Œæˆååœ¨ä»£ç ä¸­é…ç½®ä¸€ä¸‹`XxlJobSpringExecutor`ï¼Œç„¶ååœ¨æµ‹è¯•æ¥å£ä¸Šæ·»åŠ åŸç”Ÿ`@XxlJob`æ³¨è§£å’Œæˆ‘ä»¬è‡ªå®šä¹‰çš„`@XxlRegister`æ³¨è§£ï¼š

```
@XxlJob(valueÂ =Â "testJob")
@XxlRegister(cronÂ =Â "0Â 0Â 0Â *Â *Â ?Â *",
Â Â Â Â Â Â Â Â authorÂ =Â "hydra",
Â Â Â Â Â Â Â Â jobDescÂ =Â "æµ‹è¯•job")
publicÂ voidÂ testJob(){
Â Â Â Â System.out.println("#ç å†œå‚ä¸Š");
}


@XxlJob(valueÂ =Â "testJob222")
@XxlRegister(cronÂ =Â "59Â 1-2Â 0Â *Â *Â ?",
Â Â Â Â Â Â Â Â triggerStatusÂ =Â 1)
publicÂ voidÂ testJob2(){
Â Â Â Â System.out.println("#ä½œè€…ï¼šHydra");
}

@XxlJob(valueÂ =Â "testJob444")
@XxlRegister(cronÂ =Â "59Â 59Â 23Â *Â *Â ?")
publicÂ voidÂ testJob4(){
Â Â Â Â System.out.println("helloÂ xxlÂ job");
}


```

å¯åŠ¨é¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°æ‰§è¡Œå™¨è‡ªåŠ¨æ³¨å†ŒæˆåŠŸï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdPlFS3dmnRl67ZOiaoR5p2JBGaj7ZwiaVtia8yCic6hkKHgNd6Wke4rzTGOmgQkXsYiaTxzxP0rJgrFBg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

å†æ‰“å¼€è°ƒåº¦ä¸­å¿ƒçš„ä»»åŠ¡ç®¡ç†é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°åŒæ—¶æ·»åŠ äº†ä¸¤ä¸ªæ³¨è§£çš„ä»»åŠ¡ä¹Ÿå·²ç»è‡ªåŠ¨å®Œæˆäº†æ³¨å†Œï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdPlFS3dmnRl67ZOiaoR5p2J3CdiakgSkwmuffGOF0N2X9B10VhhrmxUzbH5AhCIGjYAcwntduCKdzQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

ä»é¡µé¢ä¸Šæ‰‹åŠ¨æ‰§è¡Œä»»åŠ¡è¿›è¡Œæµ‹è¯•ï¼Œå¯ä»¥æ‰§è¡ŒæˆåŠŸï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdPlFS3dmnRl67ZOiaoR5p2J6LPOKynicJqZcfwILYtib9NnliasaX7GZdjQwR47Kxhm0VPGWib25VHC1w/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

åˆ°è¿™é‡Œï¼Œstarter çš„ç¼–å†™å’Œæµ‹è¯•è¿‡ç¨‹å°±ç®—åŸºæœ¬å®Œæˆäº†ï¼Œé¡¹ç›®ä¸­å¼•å…¥åï¼Œä»¥åä¹Ÿèƒ½çœå‡ºæ›´å¤šçš„æ—¶é—´æ¥æ‘¸é±¼å­¦ä¹ äº†~

[æœ€å](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)
-----------------------------------------------------------------------------------------------------------------------------------------

é¡¹ç›®çš„å®Œæ•´ä»£ç å·²ç»ä¼ åˆ°äº†æˆ‘çš„ github ä¸Šï¼Œå°ä¼™ä¼´ä»¬å¦‚æœæœ‰éœ€è¦çš„å¯ä»¥è‡ªè¡Œä¸‹è½½ï¼Œä¹Ÿæ¬¢è¿æ¥ç‚¹ä¸ª star æ”¯æŒä¸€ä¸‹~

> https://github.com/trunks2008/xxl-job-auto-register

  

* * *

* * *

æ¬¢

* * *

æ¬¢è¿åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œå…¨é¢æå‡æŠ€æœ¯èƒ½åŠ›ã€‚

ğŸ‘‰Â åŠ å…¥æ–¹å¼ï¼Œ**â€œ**é•¿æŒ‰**â€ æˆ– â€œ**æ‰«æ**â€ ä¸‹æ–¹äºŒç»´ç å™¢**ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdvrE36I5uQ6ZlawMiahg3UYUmeiaibJrfebfNR8mDWMzmMXB49BMGYiaK7KnsSjGjP7JJoEGoRxZQMMg/640?wx_fmt=png)

æ˜Ÿçƒçš„**å†…å®¹åŒ…æ‹¬**ï¼šé¡¹ç›®å®æˆ˜ã€é¢è¯•æ‹›è˜ã€æºç è§£æã€å­¦ä¹ è·¯çº¿ã€‚

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdWPYr0VKaXztEGHacpRyle64G451XsWx4Ufc9FHYmNTqFdKdtNhyjlhrEC7Pic1dRfue78ib3TiaKBg/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdWPYr0VKaXztEGHacpRylewlfAU6nBKS8tWSIrLcmSicsq0ECUIVnf0JHibsLARrp4Z3ZCh5oSvYMQ/640?wx_fmt=png)![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdWPYr0VKaXztEGHacpRyleptHSrmBV71SbQSolzZpmdqN2q03yLwk1bwZYNu2lr17gFjO0rh1ZdQ/640?wx_fmt=png)![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdWPYr0VKaXztEGHacpRyleYQLfl6qLTABQx5UrP0dXXv6cSv2TmBoouiciaZIXwyD88h5OIsM8lpkw/640?wx_fmt=png)![](https://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfdWPYr0VKaXztEGHacpRyleicAvrkTkdGYRubqZdPNkqpoTmtOCQjkItotwtAbCxibsWUI4Dz0ILTEg/640?wx_fmt=png)

```
æ–‡ç« æœ‰å¸®åŠ©çš„è¯ï¼Œåœ¨çœ‹ï¼Œè½¬å‘å§ã€‚

è°¢è°¢æ”¯æŒå“Ÿ (*^__^*ï¼‰

```